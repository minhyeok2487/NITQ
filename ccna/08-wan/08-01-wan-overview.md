# 08-01. WAN 기술 개요 (전용선/MPLS/인터넷VPN)

> CCNA 200-301 레벨 네트워크 엔지니어 면접 대비 시나리오

---

### 면접관: "현재 회사가 서울 본사와 부산, 대전 지사를 연결하려고 합니다. WAN 기술 선택지를 비교해서 설명해 주시겠습니까?"

WAN(Wide Area Network)은 지리적으로 떨어진 네트워크를 연결하는 기술입니다. 주요 선택지를 정리하면 다음과 같습니다.

| 구분 | 전용선 (Leased Line) | MPLS VPN | Metro Ethernet | 인터넷 VPN |
|------|----------------------|----------|----------------|------------|
| **대역폭** | 보통 ~ 수십 Mbps | 수십 Mbps ~ 수 Gbps | 수백 Mbps ~ 10 Gbps | ISP 회선에 의존 |
| **비용** | 높음 | 중간~높음 | 중간 | 낮음 |
| **신뢰성** | 매우 높음 | 높음 | 높음 | 보통 |
| **지연(Latency)** | 매우 낮음 | 낮음 | 낮음 | 가변적 |
| **QoS 보장** | 가능 | SLA 기반 보장 | 가능 | 불가 |
| **보안** | 물리적 격리 | 논리적 격리 | 논리적 격리 | 암호화 필요 |
| **확장성** | 낮음 | 높음 | 중간 | 매우 높음 |

서울-부산처럼 중요한 거점 간에는 MPLS VPN을 기본으로 하고, 비용 절감이 필요하면 인터넷 VPN을 백업 경로로 구성하는 하이브리드 방식을 추천합니다.

---

### 면접관: "전용선(Leased Line)이 가장 비싸다고 하셨는데, 그럼에도 전용선을 쓰는 이유가 무엇입니까?"

전용선은 서비스 사업자가 고객 전용으로 할당한 물리적 회선입니다. 핵심 장점은 세 가지입니다.

1. **물리적 격리**: 다른 고객과 회선을 공유하지 않으므로 도청이나 대역폭 경합이 없습니다.
2. **일정한 지연**: 공유 구간이 없어 지터(jitter)와 지연이 매우 안정적입니다.
3. **SLA 보장**: 99.99% 이상의 가용성을 계약으로 보장받을 수 있습니다.

대표적인 전용선 기술로는 T1(1.544 Mbps), E1(2.048 Mbps), 그리고 한국에서는 KT, LG U+ 등이 제공하는 전용회선 서비스가 있습니다. 금융기관이나 의료기관처럼 데이터 유실이 절대 허용되지 않는 환경에서 여전히 사용됩니다.

#### 전용선 기본 인터페이스 확인

```
Router# show interfaces serial 0/0/0
Serial0/0/0 is up, line protocol is up
  Hardware is WIC MBRD Serial
  Internet address is 10.1.1.1/30
  MTU 1500 bytes, BW 1544 Kbit/sec, DLY 20000 usec
  Encapsulation HDLC
```

---

### 면접관: "MPLS VPN은 전용선보다 저렴하면서도 신뢰성이 높다고 했는데, MPLS가 어떻게 동작하는지 기본 원리를 설명해 주세요."

MPLS(Multi-Protocol Label Switching)는 IP 주소 대신 **레이블(Label)**을 사용하여 패킷을 전달하는 기술입니다.

동작 순서는 다음과 같습니다.

1. **레이블 부착 (Push)**: 패킷이 MPLS 네트워크에 진입할 때, 입구 라우터(PE, Provider Edge)가 패킷에 레이블을 붙입니다.
2. **레이블 교환 (Swap)**: MPLS 코어 라우터(P, Provider)는 IP 헤더를 확인하지 않고 레이블만 보고 다음 홉으로 전달하면서 레이블을 교환합니다.
3. **레이블 제거 (Pop)**: 출구 PE 라우터에서 레이블을 제거하고 일반 IP 패킷으로 목적지에 전달합니다.

이 방식의 장점은 코어 라우터가 복잡한 IP 라우팅 테이블 조회 없이 레이블만으로 빠르게 스위칭할 수 있다는 것입니다. 또한 서비스 사업자는 하나의 MPLS 백본 위에 여러 고객의 VPN을 논리적으로 분리하여 제공할 수 있습니다.

#### MPLS 네트워크 구성 요소

| 장비 | 역할 | 설명 |
|------|------|------|
| **CE (Customer Edge)** | 고객 장비 | 고객 네트워크의 경계 라우터 |
| **PE (Provider Edge)** | 사업자 경계 | 레이블 부착/제거, VRF 관리 |
| **P (Provider)** | 사업자 코어 | 레이블 스위칭만 수행 |

---

### 면접관: "그러면 MPLS VPN에서 고객 간 트래픽이 어떻게 분리되는지 구체적으로 설명해 주세요."

MPLS VPN에서 고객 트래픽 분리는 **VRF(Virtual Routing and Forwarding)**를 통해 이루어집니다.

PE 라우터에서 각 고객별로 별도의 VRF를 생성합니다. VRF는 독립된 라우팅 테이블이라고 이해하시면 됩니다. 고객 A의 트래픽은 VRF-A 테이블만 참조하고, 고객 B의 트래픽은 VRF-B 테이블만 참조합니다.

이 방식으로 서로 다른 고객이 동일한 사설 IP 대역(예: 10.0.0.0/8)을 사용하더라도 충돌이 발생하지 않습니다.

PE 라우터 간에는 **MP-BGP(Multi-Protocol BGP)**를 사용하여 VPN 라우팅 정보를 교환합니다. 이때 **RD(Route Distinguisher)**를 붙여 같은 IP 프리픽스라도 서로 다른 고객의 경로를 구분합니다.

```
Router# show ip vrf
  Name             Default RD       Interfaces
  CustomerA        100:1            Gi0/0
  CustomerB        100:2            Gi0/1
```

---

### 면접관: "비용을 절감하기 위해 인터넷 VPN을 사용한다면, 어떤 종류가 있고 각각 언제 사용하는 것이 좋습니까?"

인터넷 VPN은 크게 두 가지로 나뉩니다.

**1. Site-to-Site VPN (사이트 간 VPN)**
- 두 거점의 라우터 또는 방화벽 사이에 상시 VPN 터널을 구성합니다.
- 본사와 지사 간 연결에 적합합니다.
- IPSec을 주로 사용하며, GRE over IPSec도 많이 사용합니다.

**2. Remote Access VPN (원격 접속 VPN)**
- 재택근무자나 출장 직원이 개인 PC에서 회사 네트워크에 접속합니다.
- SSL VPN(AnyConnect) 또는 IPSec VPN 클라이언트를 사용합니다.
- 최근에는 SSL VPN이 방화벽 통과가 쉬워 더 많이 사용됩니다.

| 구분 | Site-to-Site VPN | Remote Access VPN |
|------|------------------|-------------------|
| **용도** | 거점 간 상시 연결 | 개인 사용자 접속 |
| **프로토콜** | IPSec, GRE+IPSec | SSL/TLS, IPSec |
| **장비** | 라우터/방화벽 | 클라이언트 소프트웨어 |
| **인증** | Pre-shared Key, 인증서 | 사용자 ID/PW, MFA |

---

### 면접관: "Metro Ethernet은 무엇이고, MPLS와 어떤 차이가 있습니까?"

Metro Ethernet은 이더넷 기술을 기반으로 MAN(Metropolitan Area Network) 범위에서 WAN 서비스를 제공하는 기술입니다.

서비스 유형은 MEF(Metro Ethernet Forum) 표준에 따라 세 가지로 분류됩니다.

1. **E-Line (Point-to-Point)**: 두 지점 간 전용 이더넷 연결. 전용선 대체 용도입니다.
2. **E-LAN (Multipoint-to-Multipoint)**: 여러 지점이 하나의 LAN처럼 연결됩니다. VPLS 기반입니다.
3. **E-Tree (Point-to-Multipoint)**: 본사가 루트, 지사가 리프인 구조입니다.

MPLS와의 차이점은 다음과 같습니다.

- Metro Ethernet은 **Layer 2** 서비스로, 고객에게 이더넷 프레임을 그대로 전달합니다.
- MPLS VPN은 **Layer 3** 서비스로, 사업자가 라우팅까지 관여합니다.
- Metro Ethernet은 주로 같은 도시 내, MPLS는 전국 또는 국제 규모에서 사용됩니다.

한국에서는 KT의 Kornet Metro, LG U+의 비즈넷 등의 상품으로 제공됩니다.

---

### 면접관: "실제로 WAN 설계를 한다면, 어떤 기준으로 기술을 선택하시겠습니까?"

WAN 기술 선택 시 고려해야 할 핵심 기준은 다음과 같습니다.

1. **예산**: 인터넷 VPN이 가장 저렴하고, 전용선이 가장 비쌉니다. 예산에 따라 1차 필터링을 합니다.
2. **대역폭 요구량**: 대용량 데이터 전송이 필요하면 Metro Ethernet이나 MPLS가 적합합니다.
3. **애플리케이션 요구사항**: VoIP나 화상회의처럼 지연에 민감한 서비스가 있다면 QoS가 보장되는 MPLS 또는 전용선이 필요합니다.
4. **보안 요구사항**: 금융, 의료 등 규제 산업은 전용선이나 MPLS를 요구하는 경우가 많습니다.
5. **확장성**: 지사가 자주 추가된다면 인터넷 VPN이나 SD-WAN이 유리합니다.
6. **가용성**: 이중화가 필요하면 MPLS + 인터넷 VPN 하이브리드 구성을 권장합니다.

실무에서는 단일 기술만 사용하는 경우는 드물고, **하이브리드 WAN** 구성이 일반적입니다. 예를 들어 주요 거점은 MPLS로 연결하고, 소규모 지사는 인터넷 VPN으로 연결하며, SD-WAN 컨트롤러로 전체를 통합 관리하는 방식입니다.

---

### 면접관: "마지막으로, WAN 회선 장애가 발생했을 때 어떻게 대응하시겠습니까?"

WAN 회선 장애 대응은 단계적으로 접근합니다.

**1단계 - 장애 확인**

```
Router# show interfaces serial 0/0/0
Router# show ip interface brief
Router# show ip route
Router# ping 10.1.1.2
Router# traceroute 10.1.1.2
```

인터페이스 상태가 down/down이면 물리적 문제, up/down이면 프로토콜 문제입니다.

**2단계 - 경로 전환 확인**
- 이중화 구성이 되어 있다면 백업 경로로 자동 전환되는지 확인합니다.
- Floating Static Route나 라우팅 프로토콜의 페일오버 동작을 점검합니다.

```
Router# show ip route
  S    10.2.0.0/16 [1/0] via 10.1.1.2    <- Primary (MPLS)
  S    10.2.0.0/16 [250/0] via 10.3.1.2  <- Backup (VPN, AD=250)
```

**3단계 - 서비스 사업자 연락**
- 회선 장애가 확인되면 ISP에 장애 신고를 하고 SLA 기반으로 복구 시간을 확인합니다.

**4단계 - 사후 조치**
- 장애 원인을 분석하고, 이중화 또는 모니터링 강화 방안을 검토합니다.
