# 06-04. 무선 트러블슈팅

> CCNA 200-301 무선 네트워크 장애 해결 면접 시나리오

---

### 면접관: "사용자들이 특정 회의실에서 Wi-Fi 속도가 느리다고 불만을 제기하고 있습니다. 원인을 어떻게 진단하시겠습니까?"

무선 네트워크 속도 저하 문제를 체계적으로 진단하겠습니다. 일반적으로 다음 순서로 원인을 파악합니다.

#### 1단계: 기본 정보 수집

```
! WLC에서 해당 AP의 클라이언트 확인
show client summary

! 특정 AP에 연결된 클라이언트 수 확인
show ap name Meeting-Room-AP1 config general

! 클라이언트의 신호 강도(RSSI) 및 SNR 확인
show client detail [CLIENT-MAC]
```

확인해야 할 항목:
- 해당 AP에 연결된 **클라이언트 수** (과밀 여부)
- 클라이언트의 **RSSI 값** (-67dBm 이상이 양호)
- **SNR(Signal-to-Noise Ratio)** 값 (25dB 이상이 양호)
- 클라이언트가 연결된 **주파수 대역과 채널**
- 클라이언트의 **데이터 전송률(Data Rate)**

#### 2단계: 간섭 확인

```
! 채널 사용률 확인
show advanced 802.11a channel
show advanced 802.11b channel

! AP의 RF 환경 확인
show ap name Meeting-Room-AP1 config dot11 5ghz
```

#### 3단계: 주요 원인별 점검

| 원인 | 증상 | 확인 방법 |
|------|------|----------|
| 신호 약함 | RSSI가 -75dBm 이하 | 클라이언트 상세 정보 확인 |
| AP 과밀 | 연결 클라이언트 수 과다 | AP별 클라이언트 수 확인 |
| 채널 간섭 | 채널 사용률 높음 | 채널 utilization 확인 |
| 비Wi-Fi 간섭 | 불규칙한 성능 저하 | 스펙트럼 분석기 사용 |
| 2.4GHz에 고정 | 속도 제한 | 클라이언트 연결 대역 확인 |
| 구형 클라이언트 | 낮은 데이터 레이트 | 클라이언트 연결 속도 확인 |

회의실의 경우 특히 **다수의 사용자가 동시 접속**하므로 AP 용량 문제일 가능성이 높고, 벽과 유리 등의 **장애물에 의한 신호 감쇠**도 확인해야 합니다.

---

### 면접관: "Co-Channel Interference와 Adjacent Channel Interference의 차이를 설명해 주시고, 각각 어떻게 해결하나요?"

무선 네트워크에서 가장 흔한 두 가지 간섭 유형을 설명드리겠습니다.

#### Co-Channel Interference (동일 채널 간섭, CCI)

- **같은 채널**을 사용하는 인접 AP 간에 발생합니다
- 동일 채널의 신호를 수신하면 CSMA/CA에 의해 **전송을 대기**해야 합니다
- 데이터 충돌은 발생하지 않지만, **채널 사용 시간(Airtime)을 나누어 써야** 합니다
- 결과: 처리량(Throughput)이 감소합니다

```
[AP1: Ch.1] ----신호 범위----> [겹치는 영역] <----신호 범위---- [AP2: Ch.1]
                                     |
                              같은 채널이므로
                              서로 대기해야 함
                              → 속도 저하
```

**해결 방법:**
- 인접 AP에 **서로 다른 비중첩 채널**을 할당합니다
- 2.4GHz: 채널 **1, 6, 11** 사용 (3개만 비중첩)
- 5GHz: 다수의 비중첩 채널 사용 가능 (약 24개)
- AP 전력을 조절하여 **커버리지 겹침 범위를 15~20%**로 유지합니다

#### Adjacent Channel Interference (인접 채널 간섭, ACI)

- **인접한(겹치는) 채널**을 사용하는 AP 간에 발생합니다
- 예: 2.4GHz에서 채널 1과 채널 3을 인접 AP에 할당한 경우
- 주파수가 일부 겹쳐서 **실제 데이터 손상(Corruption)**이 발생합니다
- Co-Channel보다 **더 심각한 문제**를 일으킵니다

```
2.4GHz 채널 배치:
Ch.1: |████████████|
Ch.3:     |████████████|        ← 채널 1과 3이 겹침 (ACI 발생!)
Ch.6:              |████████████|
Ch.11:                          |████████████|

올바른 비중첩 채널: 1, 6, 11만 사용
```

**해결 방법:**
- 2.4GHz에서는 반드시 **비중첩 채널(1, 6, 11)**만 사용합니다
- 채널 2, 3, 4, 5, 7, 8, 9, 10은 절대 사용하지 않습니다
- 5GHz 대역을 적극 활용합니다 (채널 간 충분한 간격)

| 구분 | Co-Channel Interference | Adjacent Channel Interference |
|------|------------------------|------------------------------|
| 원인 | 같은 채널을 사용하는 인접 AP | 겹치는 채널을 사용하는 인접 AP |
| 영향 | 대기 시간 증가 (Airtime 공유) | 데이터 손상 (프레임 에러) |
| 심각도 | 중간 (성능 저하) | 높음 (연결 불안정) |
| 해결 | 채널 분리, 전력 조절 | 비중첩 채널만 사용 |
| CSMA/CA | 정상 동작 (대기 후 전송) | 비정상 동작 (간섭으로 오류) |

WLC의 RRM(Radio Resource Management) 기능은 **DCA(Dynamic Channel Assignment)**를 통해 이러한 채널 간섭을 자동으로 최소화합니다.

---

### 면접관: "사이트 서베이(Site Survey)란 무엇이고, 왜 중요한가요? CCNA 레벨에서 알아야 할 기본 개념을 설명해 주세요."

사이트 서베이는 **무선 네트워크를 설계하거나 문제를 진단하기 위해 물리적 환경을 조사하는 과정**입니다.

#### 사이트 서베이의 종류

**1. Pre-deployment Survey (사전 서베이):**
- 무선 네트워크 구축 **이전에** 수행합니다
- 건물 도면을 기반으로 AP 배치를 계획합니다
- 장애물(벽, 기둥, 유리) 위치와 재질을 파악합니다
- 기존 무선 환경(간섭원)을 조사합니다

**2. Post-deployment Survey (사후 서베이):**
- AP 설치 **이후에** 수행합니다
- 실제 커버리지를 측정하고 검증합니다
- 커버리지 부족 영역(Dead Zone)을 발견합니다
- 필요 시 AP 위치나 설정을 조정합니다

**3. Predictive Survey (예측 서베이):**
- 소프트웨어 도구를 사용한 **시뮬레이션 기반** 서베이입니다
- 건물 도면에 벽 재질, AP 모델 등을 입력하면 **커버리지를 예측**합니다
- 실제 현장 방문 전에 대략적인 AP 수와 위치를 계획할 수 있습니다

#### 사이트 서베이 시 측정 항목

| 측정 항목 | 권장 기준 | 설명 |
|----------|----------|------|
| RSSI | -67dBm 이상 | 신호 강도 (음성/영상 서비스 기준) |
| SNR | 25dB 이상 | 신호 대 잡음비 |
| 채널 사용률 | 50% 이하 | 해당 채널의 사용 비율 |
| 데이터 레이트 | 24Mbps 이상 | 최소 보장 전송 속도 |
| AP 간 겹침 | 15~20% | 로밍을 위한 적절한 겹침 |

#### 장애물별 신호 감쇠 정도

```
장애물 유형          감쇠 정도
─────────────────────────────
열린 공간             매우 낮음
유리벽 (일반)         낮음
석고보드 벽           낮음~중간
목재 문               낮음~중간
콘크리트 벽           높음
금속 벽/문            매우 높음
엘리베이터 샤프트     매우 높음
바닥/천장 (콘크리트)  높음
```

사이트 서베이가 중요한 이유는, **적절한 조사 없이 AP를 배치하면 커버리지 부족, 간섭, 로밍 실패 등의 문제가 발생**하기 때문입니다. 특히 기업 환경에서는 음성(VoWiFi), 영상 회의 등 실시간 서비스의 품질 보장을 위해 사이트 서베이가 필수입니다.

---

### 면접관: "클라이언트가 AP 사이를 이동할 때 로밍이 일어나는데, 로밍 과정에서 어떤 문제가 발생할 수 있고 이를 최소화하려면 어떻게 해야 하나요?"

클라이언트 로밍의 기본 개념과 문제점, 해결 방안을 설명드리겠습니다.

#### 로밍이 발생하는 과정

```
[AP1] ----클라이언트 이동 방향----> [AP2]

1. 클라이언트가 AP1에 연결된 상태에서 이동
2. AP1의 신호가 약해지고 AP2의 신호가 강해짐
3. 클라이언트가 AP2로 재연결 (로밍)
4. 이 과정에서 일시적인 연결 끊김 발생 가능
```

#### 로밍 시 발생할 수 있는 문제

**1. Sticky Client (고착 클라이언트):**
- 클라이언트가 **먼 AP에 계속 연결을 유지**하고 새로운 가까운 AP로 로밍하지 않습니다
- 결과: 신호가 약한 상태로 계속 연결되어 **속도가 매우 느려집니다**
- 해결: WLC에서 **최소 RSSI 임계값**을 설정하여 신호가 약한 클라이언트를 연결 해제합니다

**2. 로밍 지연:**
- 새 AP와의 인증 과정에서 **수백 밀리초~수 초의 지연**이 발생합니다
- 특히 802.1X 인증 환경에서는 **전체 재인증**이 필요할 수 있습니다
- 음성 통화 시 150ms 이상 지연되면 **통화 끊김**이 발생합니다

**3. AP 커버리지 간격 (Dead Zone):**
- 두 AP의 커버리지가 **충분히 겹치지 않는 영역**이 있습니다
- 클라이언트가 이 영역을 지나갈 때 **연결이 완전히 끊깁니다**

#### 로밍 최적화 방법

**1. 적절한 AP 겹침 영역 확보:**
- 인접 AP 간 커버리지가 **15~20% 겹치도록** 설계합니다
- Dead Zone이 없도록 사이트 서베이로 검증합니다

**2. 빠른 로밍 프로토콜 사용:**
- **802.11r (Fast BSS Transition / FT)**: 로밍 시 인증 시간을 단축합니다
- **OKC (Opportunistic Key Caching)**: PMK를 캐시하여 재인증을 건너뜁니다
- WLC 환경에서는 PMK 정보를 중앙에서 관리하여 빠른 로밍을 지원합니다

**3. WLC의 로밍 관련 설정:**

```
! 최소 RSSI 설정 (Sticky Client 방지)
config advanced 802.11a optimized-roaming enable
config advanced 802.11a optimized-roaming interval 90
config advanced 802.11a optimized-roaming threshold -72

! 802.11r Fast Transition 활성화
config wlan security ft enable [WLAN-ID]

! 클라이언트 로밍 이력 확인
show client detail [CLIENT-MAC]
show mobility summary
```

| 로밍 방식 | 지연 시간 | 적용 환경 |
|----------|----------|----------|
| Full Reauthentication | 수백ms ~ 수초 | 기본 상태 |
| OKC / PMK Caching | 약 100ms | WLC 환경 |
| 802.11r (FT) | 약 50ms 이하 | 최신 클라이언트/AP |

---

### 면접관: "비Wi-Fi 간섭원에는 어떤 것들이 있고, 이를 어떻게 탐지하고 해결하나요?"

비Wi-Fi 간섭은 802.11 프로토콜을 사용하지 않는 장치에서 발생하는 RF 간섭입니다.

#### 주요 비Wi-Fi 간섭원

**2.4GHz 대역에서 흔한 간섭원:**
- **전자레인지**: 2.45GHz 주변에서 강한 간섭 (가장 흔함)
- **블루투스 장치**: 2.4GHz 대역 사용 (주파수 호핑)
- **무선 전화기**: 구형 2.4GHz 무선 전화기
- **베이비 모니터**: 2.4GHz 대역 사용
- **무선 카메라**: 아날로그 무선 카메라
- **ZigBee/Zigbee 장치**: IoT 센서 등

**5GHz 대역에서의 간섭원:**
- **레이더 시스템**: DFS 채널에서 감지될 수 있음
- **일부 의료 장비**: 특정 주파수에서 간섭 발생

#### 간섭 탐지 방법

```
! WLC에서 간섭 정보 확인
show ap auto-rf 802.11b/g/n [AP-NAME]
show advanced 802.11a channel

! CleanAir 기능 사용 (지원 AP에서)
show ap name [AP-NAME] cleanair device type all

! 채널 utilization 확인
show advanced 802.11a txpower
```

**스펙트럼 분석기 사용:**
- Cisco의 **CleanAir** 기능이 탑재된 AP는 스펙트럼 분석이 가능합니다
- 외부 도구로는 **MetaGeek, Ekahau** 등의 스펙트럼 분석기를 사용합니다
- 일반 Wi-Fi 스캐너는 802.11 프레임만 감지하므로, 비Wi-Fi 간섭은 **스펙트럼 분석기**가 필요합니다

#### 간섭 해결 방법

| 간섭원 | 해결 방법 |
|--------|----------|
| 전자레인지 | 5GHz 대역 사용, AP를 전자레인지에서 멀리 배치 |
| 블루투스 | 2.4GHz 채널 조정, 5GHz 대역 우선 사용 |
| 구형 무선 전화기 | 장비 교체 또는 5GHz 대역 활용 |
| 레이더 (DFS) | DFS 채널 회피 또는 자동 채널 변경(WLC RRM) |
| 일반적인 대응 | 5GHz/6GHz 대역으로 클라이언트 유도 (Band Steering) |

**Band Steering** 기능을 활성화하면, 듀얼 밴드 지원 클라이언트를 자동으로 **5GHz 대역으로 유도**하여 2.4GHz의 간섭 문제를 우회할 수 있습니다.

---

### 면접관: "무선 트러블슈팅에 사용하는 도구와 명령어를 정리해서 알려주세요."

무선 트러블슈팅 도구를 분류하여 정리하겠습니다.

#### Cisco WLC CLI 명령어

```
! === AP 상태 확인 ===
show ap summary                           # 전체 AP 목록 및 상태
show ap name [AP-NAME] config general     # 특정 AP 상세 설정
show ap uptime                            # AP 가동 시간

! === 클라이언트 문제 진단 ===
show client summary                       # 전체 클라이언트 목록
show client detail [MAC]                  # 특정 클라이언트 상세 정보
                                          # - RSSI, SNR, Data Rate
                                          # - 연결된 AP, SSID, VLAN
                                          # - 인증 상태, 로밍 이력

! === RF 환경 진단 ===
show advanced 802.11a summary             # 5GHz 채널/파워 요약
show advanced 802.11b summary             # 2.4GHz 채널/파워 요약
show ap auto-rf 802.11a [AP-NAME]         # AP RF 자동 조정 상태
show ap auto-rf 802.11b [AP-NAME]         # 간섭, 노이즈, 채널 변경 이력

! === 연결 문제 진단 ===
show exclusionlist                        # 차단된 클라이언트 목록
show dtls connections                     # CAPWAP 터널 상태
debug client [MAC]                        # 특정 클라이언트 디버그 (주의: 성능 영향)

! === WLAN 설정 확인 ===
show wlan summary                         # WLAN 목록 및 상태
show wlan [WLAN-ID]                       # 특정 WLAN 상세 설정
```

#### 클라이언트 측 도구

| 도구 | 용도 | 플랫폼 |
|------|------|--------|
| Wi-Fi Analyzer | 채널, 신호 강도 시각화 | Android |
| Airport Utility | Wi-Fi 스캔 | macOS/iOS |
| netsh wlan show all | Wi-Fi 상태 확인 | Windows |
| iwconfig / iw | 무선 인터페이스 정보 | Linux |
| ping / traceroute | 기본 연결성 테스트 | 모든 OS |
| Wireshark | 패킷 캡처 및 분석 | 모든 OS |

```
! Windows에서 무선 상태 확인
netsh wlan show interfaces              # 현재 연결된 무선 정보
netsh wlan show networks mode=bssid     # 주변 네트워크 스캔

! macOS에서 무선 진단
# Option 키를 누르고 Wi-Fi 아이콘 클릭 → 상세 정보 확인
# Wireless Diagnostics 실행 (Spotlight에서 검색)
```

#### 전문 도구

- **Ekahau Site Survey**: 히트맵 기반 사이트 서베이 도구
- **MetaGeek inSSIDer / Chanalyzer**: Wi-Fi 분석 및 스펙트럼 분석
- **Cisco DNA Center / Prime Infrastructure**: 중앙 집중 무선 관리 및 모니터링

---

### 면접관: "마지막으로, AP 배치 시 고려해야 할 기본 가이드라인을 말씀해 주세요."

AP 배치 시 고려해야 할 핵심 가이드라인을 정리하겠습니다.

#### 1. 커버리지 설계 원칙

```
올바른 AP 배치 (벌집 구조):

    [AP1]         [AP2]         [AP3]
      ●─────────────●─────────────●
     / \    15-20%  / \   15-20%  / \
    /   \ 겹침 영역/   \ 겹침 영역/   \
   /     \       /     \       /     \
  ●───────●─────●───────●─────●───────●
 [AP4]  [AP5]  [AP6]  [AP7]  [AP8]  [AP9]

- 인접 AP 간 커버리지 15~20% 겹침 유지
- Dead Zone 방지
- 로밍 원활하게 지원
```

#### 2. AP 배치 위치 가이드라인

| 권장 사항 | 비권장 사항 |
|----------|------------|
| 천장 중앙에 설치 (하향 방사) | 벽 구석에 설치 |
| 사용자 밀집 지역에 가깝게 | 장애물(금속 캐비닛 등) 뒤에 설치 |
| 복도보다 방/사무실 위에 | 전자레인지, 블루투스 장비 근처 |
| 층간 AP는 지그재그 배치 | 직선 일렬 배치 (채널 계획 어려움) |
| 건물 내부에 집중 | 외부로 신호가 과도하게 유출되는 위치 |

#### 3. 환경별 권장 AP 밀도

| 환경 | 클라이언트 밀도 | AP 간 간격 | 비고 |
|------|---------------|-----------|------|
| 일반 사무실 | 중간 (20~30명/AP) | 약 15~20m | 표준 설계 |
| 회의실 | 높음 (50명 이상) | 별도 AP 설치 | 고밀도 설계 |
| 창고/공장 | 낮음 | 약 25~30m | 장애물 고려 |
| 강당/세미나실 | 매우 높음 | 고밀도 설계 필요 | 지향성 안테나 고려 |
| 야외 공간 | 다양 | 약 50~100m | 외장형 AP 사용 |

#### 4. 채널 계획 예시

```
2.4GHz 채널 배치 (비중첩 채널 3개):

   [Ch.1]     [Ch.6]     [Ch.11]
      ●──────────●──────────●
     / \        / \        / \
    /   \      /   \      /   \
   ●─────●────●─────●────●─────●
 [Ch.6] [Ch.11] [Ch.1] [Ch.6] [Ch.11] [Ch.1]

5GHz 채널 배치:
- 채널이 풍부하므로 더 유연한 계획 가능
- 20MHz 폭: 약 24개 비중첩 채널
- 40MHz 폭: 약 12개 비중첩 채널
- 80MHz 폭: 약 6개 비중첩 채널
```

#### 5. 전력 설정 가이드라인

- AP 전력은 **필요한 만큼만** 설정합니다 (최대 전력이 최선이 아님)
- 전력이 너무 높으면:
  - 클라이언트가 먼 AP에 **Sticky**하게 연결됩니다
  - 인접 AP와의 **Co-Channel 간섭이 증가**합니다
  - 클라이언트의 송신 전력보다 AP 수신 전력이 높아 **비대칭 링크** 발생

- WLC의 **TPC(Transmit Power Control)** 기능으로 자동 전력 조정이 가능합니다

```
! WLC에서 전력 관련 설정 확인
show advanced 802.11a txpower
show advanced 802.11b txpower

! AP별 수동 전력 조정 (필요 시)
config 802.11a txPower ap [AP-NAME] [POWER-LEVEL]
```

무선 네트워크 설계의 핵심은 **"충분한 커버리지와 적절한 용량을 제공하면서 간섭을 최소화"**하는 것이며, 이를 위해 사이트 서베이와 체계적인 채널/전력 계획이 필수적입니다.

---

> **핵심 정리**: 무선 트러블슈팅은 체계적인 접근이 중요합니다. 신호 강도, 간섭, 채널 계획, AP 배치를 종합적으로 분석하고, WLC의 모니터링 도구와 클라이언트 측 진단 도구를 함께 활용하여 문제를 해결해야 합니다.
