# 05-01. Standard ACL과 Extended ACL

> CCNA 200-301 보안 면접 시나리오 - Access Control List 기본 개념과 설정

---

### 면접관: "네트워크에서 ACL이 무엇이고, 왜 필요한지 설명해 주세요."

ACL은 Access Control List의 약자로, 라우터나 스위치에서 트래픽을 필터링하는 규칙 목록입니다. 쉽게 말해 네트워크의 "출입 통제 명단"이라고 볼 수 있습니다.

ACL이 필요한 이유는 크게 세 가지입니다.

1. **보안**: 허가되지 않은 트래픽이 특정 네트워크에 접근하는 것을 차단합니다
2. **트래픽 제어**: 불필요한 트래픽을 줄여 네트워크 성능을 유지합니다
3. **정책 적용**: 회사 보안 정책에 따라 특정 서비스 접근을 제한합니다

ACL은 라우터 인터페이스에 적용되며, 패킷이 해당 인터페이스를 통과할 때 순서대로 규칙을 검사합니다. 일치하는 규칙이 있으면 해당 동작(permit 또는 deny)을 수행하고, 모든 규칙에 일치하지 않으면 마지막에 있는 암시적 deny(implicit deny any)에 의해 패킷이 차단됩니다.

---

### 면접관: "Standard ACL과 Extended ACL의 차이를 비교해 주세요."

두 ACL의 핵심 차이는 필터링 기준의 범위입니다.

| 구분 | Standard ACL | Extended ACL |
|------|-------------|--------------|
| 번호 범위 | 1-99 (확장: 1300-1999) | 100-199 (확장: 2000-2699) |
| 필터링 기준 | 출발지 IP만 | 출발지 IP, 목적지 IP, 프로토콜, 포트 번호 |
| 배치 위치 | 목적지에 가깝게 | 출발지에 가깝게 |
| 세밀한 제어 | 불가능 | 가능 |
| 사용 사례 | 단순 접근 차단 | 특정 서비스별 세밀한 제어 |

Standard ACL은 출발지 IP 주소만 보기 때문에 간단하지만 세밀한 제어가 어렵습니다. 예를 들어 "10.1.1.0 네트워크의 모든 트래픽 차단"은 가능하지만, "10.1.1.0에서 오는 웹 트래픽만 차단"은 할 수 없습니다.

Extended ACL은 출발지, 목적지, 프로토콜, 포트 번호까지 지정할 수 있어서 "10.1.1.0에서 192.168.1.0의 80번 포트로 가는 TCP 트래픽만 허용" 같은 세밀한 제어가 가능합니다.

---

### 면접관: "ACL 배치 규칙에 대해 설명해 주시겠어요? 왜 Standard는 목적지 근처, Extended는 출발지 근처에 배치하나요?"

ACL 배치 규칙은 네트워크 효율성과 직접 관련됩니다.

**Standard ACL을 목적지 가까이 배치하는 이유:**
Standard ACL은 출발지 IP만 검사합니다. 만약 출발지 가까이에 배치하면, 해당 출발지에서 나가는 모든 트래픽이 차단됩니다. 의도하지 않은 다른 목적지로의 트래픽까지 차단될 수 있기 때문에 목적지 근처에 배치하여 영향 범위를 최소화합니다.

**Extended ACL을 출발지 가까이 배치하는 이유:**
Extended ACL은 출발지, 목적지, 프로토콜, 포트까지 세밀하게 지정할 수 있으므로 출발지 근처에서 차단해도 의도하지 않은 차단이 발생하지 않습니다. 오히려 불필요한 트래픽을 일찍 차단하여 네트워크 대역폭을 절약할 수 있습니다.

```
[출발지] ---라우터A--- [중간 네트워크] ---라우터B--- [목적지]

Extended ACL → 라우터A에 적용 (출발지 근처)
Standard ACL → 라우터B에 적용 (목적지 근처)
```

---

### 면접관: "Wildcard Mask에 대해 설명하고, 서브넷 마스크와 어떻게 다른지 알려주세요."

Wildcard Mask는 ACL에서 IP 주소의 어떤 비트를 검사하고 어떤 비트를 무시할지 지정하는 역할을 합니다.

서브넷 마스크와의 핵심 차이점은 다음과 같습니다.

| 구분 | 서브넷 마스크 | 와일드카드 마스크 |
|------|-------------|-----------------|
| 0의 의미 | 호스트 부분 | 정확히 일치해야 함 (검사) |
| 1의 의미 | 네트워크 부분 | 무시 (don't care) |
| 관계 | - | 서브넷 마스크의 역(inverse) |

변환 방법은 255.255.255.255에서 서브넷 마스크를 빼면 됩니다.

```
서브넷 마스크: 255.255.255.0
와일드카드:   255.255.255.255 - 255.255.255.0 = 0.0.0.255
```

자주 사용하는 와일드카드 마스크 예시입니다.

- `0.0.0.0` — 정확히 하나의 호스트 (host 키워드와 동일)
- `0.0.0.255` — /24 네트워크 전체
- `0.0.255.255` — /16 네트워크 전체
- `255.255.255.255` — 모든 IP (any 키워드와 동일)

---

### 면접관: "실제 시나리오를 하나 드리겠습니다. 10.10.10.0/24 네트워크에서 192.168.1.0/24 서버 팜의 웹 서비스(HTTP, HTTPS)만 허용하고 나머지는 차단하려면 어떻게 설정하시겠습니까?"

이 경우 출발지와 목적지, 그리고 특정 포트를 지정해야 하므로 Extended ACL을 사용해야 합니다. 출발지 라우터 인터페이스에 적용하겠습니다.

#### 핵심 설정

```
Router(config)# ip access-list extended WEB-ONLY
Router(config-ext-nacl)# permit tcp 10.10.10.0 0.0.0.255 192.168.1.0 0.0.0.255 eq 80
Router(config-ext-nacl)# permit tcp 10.10.10.0 0.0.0.255 192.168.1.0 0.0.0.255 eq 443
Router(config-ext-nacl)# deny ip 10.10.10.0 0.0.0.255 192.168.1.0 0.0.0.255
Router(config-ext-nacl)# permit ip any any
Router(config-ext-nacl)# exit
Router(config)# interface GigabitEthernet0/0
Router(config-if)# ip access-group WEB-ONLY in
```

설정에서 중요한 점을 설명드리겠습니다.

1. **Named ACL 사용**: 번호 대신 의미 있는 이름을 사용하면 관리가 편합니다
2. **HTTP(80)와 HTTPS(443)만 허용**: TCP 프로토콜에 특정 포트를 지정했습니다
3. **명시적 deny**: 서버 팜으로 가는 나머지 트래픽은 차단합니다
4. **permit ip any any**: 서버 팜이 아닌 다른 목적지로의 트래픽은 허용합니다. 이 줄이 없으면 암시적 deny에 의해 모든 트래픽이 차단됩니다
5. **in 방향 적용**: 패킷이 인터페이스로 들어올 때 검사합니다

---

### 면접관: "ACL에서 in과 out 방향의 차이를 좀 더 구체적으로 설명해 주세요."

ACL의 방향은 라우터 인터페이스를 기준으로 판단합니다.

- **in (inbound)**: 패킷이 외부에서 해당 인터페이스로 들어올 때 검사합니다. 라우팅 처리 전에 필터링이 이루어집니다.
- **out (outbound)**: 패킷이 라우팅 처리 후 해당 인터페이스를 통해 나갈 때 검사합니다.

```
패킷 흐름:

[외부] → (IN 필터링) → [라우팅 결정] → (OUT 필터링) → [외부]
              ↑                                ↑
         인바운드 ACL                      아웃바운드 ACL
```

일반적으로 **in 방향**을 더 많이 사용합니다. 이유는 패킷이 라우팅 처리되기 전에 차단하면 라우터의 CPU 부하를 줄일 수 있기 때문입니다. 불필요한 패킷을 먼저 걸러내는 것이 효율적입니다.

주의할 점은 하나의 인터페이스에 같은 프로토콜에 대해 in 방향 1개, out 방향 1개, 총 최대 2개의 ACL만 적용할 수 있다는 것입니다.

---

### 면접관: "ACL 트러블슈팅 시 사용하는 명령어와 주의사항을 알려주세요."

주요 확인 명령어는 다음과 같습니다.

#### 핵심 명령어

```
Router# show access-lists
  → 모든 ACL과 각 줄의 매칭 카운터를 확인

Router# show access-lists 100
  → 특정 ACL 번호의 상세 내용 확인

Router# show ip interface GigabitEthernet0/0
  → 인터페이스에 어떤 ACL이 어느 방향으로 적용되었는지 확인

Router# show running-config | include access
  → 설정에서 ACL 관련 항목만 필터링
```

트러블슈팅 시 흔한 실수와 주의사항입니다.

1. **순서 문제**: ACL은 위에서 아래로 순서대로 검사합니다. 더 구체적인 규칙을 위에 배치해야 합니다. 예를 들어 `permit ip any any`가 첫 줄이면 이후 deny 규칙은 의미가 없습니다.

2. **암시적 deny 잊음**: ACL 마지막에 보이지 않는 `deny ip any any`가 있습니다. 필요한 트래픽을 permit하지 않으면 모두 차단됩니다.

3. **인터페이스 미적용**: ACL을 만들기만 하고 인터페이스에 적용하지 않으면 아무 효과가 없습니다.

4. **와일드카드 마스크 오류**: 서브넷 마스크와 혼동하여 반대로 입력하는 경우가 많습니다.

5. **양방향 트래픽 고려**: 요청 트래픽만 허용하고 응답 트래픽을 차단하면 통신이 되지 않습니다. Established 키워드를 활용하거나 양방향을 모두 고려해야 합니다.

---

### 면접관: "마지막으로, Named ACL이 Numbered ACL에 비해 가지는 장점은 무엇인가요?"

Named ACL은 실무에서 더 선호되며, 주요 장점은 다음과 같습니다.

1. **가독성**: `access-list 101`보다 `WEB-FILTER`처럼 의미 있는 이름이 관리에 유리합니다
2. **개별 항목 삭제 가능**: Numbered ACL은 특정 줄만 삭제할 수 없어 전체를 지우고 다시 작성해야 했지만, Named ACL은 개별 항목을 삭제할 수 있습니다
3. **시퀀스 번호 지원**: 특정 위치에 규칙을 삽입할 수 있습니다

```
Router(config)# ip access-list extended WEB-FILTER
Router(config-ext-nacl)# no 20
  → 시퀀스 번호 20번 항목만 삭제

Router(config-ext-nacl)# 15 permit tcp host 10.1.1.5 any eq 22
  → 시퀀스 15번 위치에 새 규칙 삽입
```

다만 Named ACL도 Standard와 Extended로 구분되며, 필터링 기준은 동일합니다. 이름을 사용한다고 해서 기능이 달라지는 것은 아닙니다.

정리하면, ACL은 네트워크 보안의 첫 번째 방어선으로서 올바른 유형 선택, 적절한 배치, 정확한 순서가 핵심입니다.
