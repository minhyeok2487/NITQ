# 01-03. 서브넷팅 (Subnetting)

> CCNA 200-301 수준의 네트워크 엔지니어 면접 시나리오입니다.
> 서브넷 마스크 기본 개념, 네트워크/브로드캐스트/호스트 범위 계산, /24 /25 /26 예제, 이진수 변환 등을 다룹니다.

---

### 면접관: "서브넷팅(Subnetting)이란 무엇이고, 왜 필요한지 설명해 주세요."

서브넷팅이란 하나의 큰 네트워크를 더 작은 여러 개의 서브네트워크(서브넷)로 나누는 기술입니다.

**서브넷팅이 필요한 이유:**

1. **IP 주소의 효율적 사용**: 클래스풀(Classful) 방식으로는 Class C 네트워크가 254개의 호스트를 지원하는데, 만약 10개의 호스트만 필요한 부서라면 244개의 IP가 낭비됩니다. 서브넷팅을 통해 필요한 만큼만 할당할 수 있습니다.

2. **브로드캐스트 도메인 축소**: 네트워크를 나누면 브로드캐스트 트래픽이 해당 서브넷 내로 제한되어 전체 네트워크 성능이 향상됩니다.

3. **보안 강화**: 부서별, 용도별로 네트워크를 분리하면 접근 제어가 용이해집니다.

4. **관리 용이성**: 네트워크를 논리적으로 구분하여 관리 및 트러블슈팅이 편해집니다.

**서브넷 마스크의 역할:**

서브넷 마스크는 IP 주소에서 네트워크 부분과 호스트 부분을 구분하는 역할을 합니다.

```
IP 주소:     192.168.1.100
서브넷 마스크: 255.255.255.0  (/24)

이진수 표현:
IP:   11000000.10101000.00000001.01100100
Mask: 11111111.11111111.11111111.00000000
      |---- 네트워크 부분 ----||- 호스트 -|
```

서브넷 마스크에서 1인 비트는 네트워크 부분을, 0인 비트는 호스트 부분을 나타냅니다.

---

### 면접관: "192.168.1.0/24 네트워크가 있다고 할 때, 네트워크 주소, 브로드캐스트 주소, 사용 가능한 호스트 범위를 구해 보세요."

/24 네트워크에 대해 계산해 보겠습니다.

```
네트워크:       192.168.1.0/24
서브넷 마스크:   255.255.255.0

네트워크 주소:   192.168.1.0     (호스트 비트 전부 0)
브로드캐스트:    192.168.1.255   (호스트 비트 전부 1)
첫 번째 호스트:  192.168.1.1     (네트워크 주소 + 1)
마지막 호스트:   192.168.1.254   (브로드캐스트 주소 - 1)
사용 가능 호스트: 254개           (2^8 - 2 = 254)
```

**호스트 수 계산 공식:**
- 사용 가능한 호스트 수 = **2^(호스트 비트 수) - 2**
- 2를 빼는 이유: 네트워크 주소(호스트 비트 전부 0)와 브로드캐스트 주소(호스트 비트 전부 1)는 호스트에 할당할 수 없기 때문입니다.

#### Cisco 장비에서 설정 및 확인

```
Router(config)# interface GigabitEthernet0/0
Router(config-if)# ip address 192.168.1.1 255.255.255.0
Router(config-if)# no shutdown

Router# show ip interface brief
Interface          IP-Address      OK? Method Status Protocol
GigabitEthernet0/0 192.168.1.1     YES manual up     up
```

---

### 면접관: "그러면 /25로 서브넷팅하면 어떻게 되나요? 구체적으로 계산해 보세요."

/25는 서브넷 마스크가 255.255.255.128이며, 호스트 비트가 7비트입니다. 이를 통해 /24 네트워크를 2개의 서브넷으로 나눌 수 있습니다.

```
원본 네트워크: 192.168.1.0/24
서브넷 마스크: 255.255.255.128 (/25)

이진수 분석:
마스크: 11111111.11111111.11111111.10000000
                                    ^
                              이 비트로 서브넷 구분
```

| 항목 | 서브넷 1 | 서브넷 2 |
|------|----------|----------|
| 네트워크 주소 | 192.168.1.0/25 | 192.168.1.128/25 |
| 첫 번째 호스트 | 192.168.1.1 | 192.168.1.129 |
| 마지막 호스트 | 192.168.1.126 | 192.168.1.254 |
| 브로드캐스트 | 192.168.1.127 | 192.168.1.255 |
| 호스트 수 | 126개 (2^7 - 2) | 126개 (2^7 - 2) |

**빠른 계산 팁:**
- /25의 블록 크기(Block Size) = 256 - 128 = **128**
- 첫 번째 서브넷: 0부터 시작 → 0 ~ 127
- 두 번째 서브넷: 128부터 시작 → 128 ~ 255

```
Router(config)# interface GigabitEthernet0/0
Router(config-if)# ip address 192.168.1.1 255.255.255.128

Router(config)# interface GigabitEthernet0/1
Router(config-if)# ip address 192.168.1.129 255.255.255.128
```

---

### 면접관: "/26으로 서브넷팅하면 어떻게 되나요? 그리고 192.168.1.200이 어느 서브넷에 속하는지도 계산해 보세요."

/26은 서브넷 마스크가 255.255.255.192이며, 호스트 비트가 6비트입니다. /24 네트워크를 4개의 서브넷으로 나눌 수 있습니다.

```
서브넷 마스크: 255.255.255.192 (/26)
블록 크기: 256 - 192 = 64
서브넷 수: 2^2 = 4개
호스트 수: 2^6 - 2 = 62개 (서브넷당)
```

| 서브넷 | 네트워크 주소 | 호스트 범위 | 브로드캐스트 |
|--------|-------------|------------|-------------|
| 1 | 192.168.1.0/26 | .1 ~ .62 | 192.168.1.63 |
| 2 | 192.168.1.64/26 | .65 ~ .126 | 192.168.1.127 |
| 3 | 192.168.1.128/26 | .129 ~ .190 | 192.168.1.191 |
| 4 | 192.168.1.192/26 | .193 ~ .254 | 192.168.1.255 |

**192.168.1.200이 속한 서브넷 찾기:**

블록 크기가 64이므로 서브넷 경계는 0, 64, 128, 192입니다.
200은 192 이상이고 256 미만이므로, **네 번째 서브넷 192.168.1.192/26**에 속합니다.

```
검증:
네트워크: 192.168.1.192
200은 192~254 범위 안에 있음 → 정답!
게이트웨이 (보통): 192.168.1.193
브로드캐스트: 192.168.1.255
```

---

### 면접관: "면접 현장에서 서브넷팅을 빠르게 계산하는 방법이 있나요? 팁을 공유해 주세요."

네, 면접에서 자주 사용하는 빠른 계산법을 공유드리겠습니다.

#### 핵심 암기표

| CIDR | 서브넷 마스크 | 블록 크기 | 호스트 수 |
|------|-------------|----------|----------|
| /24 | 255.255.255.0 | 256 | 254 |
| /25 | 255.255.255.128 | 128 | 126 |
| /26 | 255.255.255.192 | 64 | 62 |
| /27 | 255.255.255.224 | 32 | 30 |
| /28 | 255.255.255.240 | 16 | 14 |
| /29 | 255.255.255.248 | 8 | 6 |
| /30 | 255.255.255.252 | 4 | 2 |
| /31 | 255.255.255.254 | 2 | 2 (P2P) |
| /32 | 255.255.255.255 | 1 | 1 (호스트 라우트) |

#### 빠른 계산 3단계

**1단계: 블록 크기 구하기**
- 블록 크기 = 256 - 서브넷 마스크의 마지막 옥텟 값
- 예: /26 → 256 - 192 = 64

**2단계: 서브넷 경계 나열하기**
- 블록 크기 간격으로 나열: 0, 64, 128, 192

**3단계: 해당 IP가 속한 범위 찾기**
- 해당 IP보다 작거나 같은 가장 가까운 서브넷 경계가 네트워크 주소
- 다음 서브넷 경계 - 1이 브로드캐스트 주소

#### 이진수 변환 빠른 참조

```
2^7 = 128    2^6 = 64     2^5 = 32     2^4 = 16
2^3 = 8      2^2 = 4      2^1 = 2      2^0 = 1

예: 200을 이진수로 변환
200 = 128 + 64 + 8 = 11001000
```

---

### 면접관: "회사에 100명의 직원이 있고, 영업부(45명), 개발부(30명), 관리부(20명)으로 나눠야 합니다. 10.0.0.0/24에서 서브넷을 설계해 보세요."

각 부서에 필요한 호스트 수를 기준으로 적절한 서브넷을 할당하겠습니다.

**요구사항 분석:**
- 영업부: 45명 → 최소 45개 호스트 → /26 (62개 호스트) 선택
- 개발부: 30명 → 최소 30개 호스트 → /27 (30개 호스트) 선택
- 관리부: 20명 → 최소 20개 호스트 → /27 (30개 호스트) 선택

**서브넷 할당 (큰 서브넷부터 할당):**

| 부서 | 서브넷 | 네트워크 주소 | 호스트 범위 | 브로드캐스트 | 게이트웨이 |
|------|--------|-------------|------------|-------------|-----------|
| 영업부 | /26 | 10.0.0.0/26 | 10.0.0.1 ~ .62 | 10.0.0.63 | 10.0.0.1 |
| 개발부 | /27 | 10.0.0.64/27 | 10.0.0.65 ~ .94 | 10.0.0.95 | 10.0.0.65 |
| 관리부 | /27 | 10.0.0.96/27 | 10.0.0.97 ~ .126 | 10.0.0.127 | 10.0.0.97 |
| 여분 | - | 10.0.0.128 ~ 10.0.0.255 | 향후 확장용 | - | - |

**중요한 포인트:** 큰 서브넷부터 먼저 할당하는 이유는 주소 낭비를 줄이고 정렬을 깔끔하게 유지하기 위함입니다. 이것이 VLSM(Variable Length Subnet Mask)의 핵심입니다.

#### 라우터 설정 예시

```
Router(config)# interface GigabitEthernet0/0.10
Router(config-subif)# encapsulation dot1Q 10
Router(config-subif)# ip address 10.0.0.1 255.255.255.192
Router(config-subif)# description Sales-Department

Router(config)# interface GigabitEthernet0/0.20
Router(config-subif)# encapsulation dot1Q 20
Router(config-subif)# ip address 10.0.0.65 255.255.255.224
Router(config-subif)# description Development-Department

Router(config)# interface GigabitEthernet0/0.30
Router(config-subif)# encapsulation dot1Q 30
Router(config-subif)# ip address 10.0.0.97 255.255.255.224
Router(config-subif)# description Admin-Department
```

---

### 면접관: "/30 서브넷은 어떤 용도로 사용하나요? 왜 WAN 링크에 /30을 많이 쓰나요?"

/30 서브넷은 사용 가능한 호스트가 **2개**뿐이므로, 라우터 간 **Point-to-Point WAN 링크**에 최적화된 서브넷입니다.

```
/30 서브넷: 255.255.255.252
블록 크기: 256 - 252 = 4
호스트 수: 2^2 - 2 = 2개
```

**예시: 라우터 간 WAN 연결**

```
10.0.0.0/30 할당:
  네트워크 주소: 10.0.0.0     (사용 불가)
  Router A:     10.0.0.1     (사용 가능)
  Router B:     10.0.0.2     (사용 가능)
  브로드캐스트:  10.0.0.3     (사용 불가)
```

```
! Router A 설정
Router-A(config)# interface Serial0/0/0
Router-A(config-if)# ip address 10.0.0.1 255.255.255.252
Router-A(config-if)# no shutdown

! Router B 설정
Router-B(config)# interface Serial0/0/0
Router-B(config-if)# ip address 10.0.0.2 255.255.255.252
Router-B(config-if)# no shutdown
```

**왜 /30을 사용하나:**
- Point-to-Point 링크는 양쪽 라우터 2개만 연결하므로, 호스트 주소 2개면 충분합니다.
- /24를 할당하면 252개의 IP가 낭비됩니다.
- IP 주소 절약을 위해 /30을 사용하는 것이 표준적인 관행입니다.

참고로, 최근에는 **/31 서브넷**(RFC 3021)도 Point-to-Point 링크에 사용할 수 있습니다. /31은 네트워크 주소와 브로드캐스트 주소 없이 2개의 호스트 주소만 제공하여, /30보다 더 효율적입니다.

```
! /31 사용 예시
Router-A(config-if)# ip address 10.0.0.0 255.255.255.254
Router-B(config-if)# ip address 10.0.0.1 255.255.255.254
```
